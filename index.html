<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mattefaen</title>
<style>
  body { font-family: Arial; background: #f5f5f5; color: #333; padding: 20px; text-align:center; }
  h1 { margin-bottom: 20px; }
  .timer { font-size: 2em; font-weight: bold; color: #0077cc; }
</style>
</head>
<body>
<h1>Mattefaen</h1>
<p>Total matte igjen i dette forpulte skoleåret:</p>
<p>Laget av Andreas med litt hjelp av sjefen selv chatgpt, laget fra 0300 til 0515 imens han hørte på forpult ravemusikk:</p>
<div class="timer" id="totalCountdown">Laster...</div>

<script>
// Klasse-datoer og tider
const classDates = [
  { date: "09.02.26", day: "Mandag" },
  { date: "10.02.26", day: "Tirsdag" },
  { date: "12.02.26", day: "Torsdag" },
  { date: "23.02.26", day: "Mandag" },
  { date: "24.02.26", day: "Tirsdag" },
  { date: "26.02.26", day: "Torsdag" },
  { date: "02.03.26", day: "Mandag" },
  { date: "03.03.26", day: "Tirsdag" },
  { date: "05.03.26", day: "Torsdag" },
  { date: "09.03.26", day: "Mandag" },
  { date: "10.03.26", day: "Tirsdag" },
  { date: "12.03.26", day: "Torsdag" },
  { date: "16.03.26", day: "Mandag" },
  { date: "17.03.26", day: "Tirsdag" },
  { date: "19.03.26", day: "Torsdag" },
  { date: "26.03.26", day: "Torsdag" },
  { date: "07.04.26", day: "Tirsdag" },
  { date: "09.04.26", day: "Torsdag" },
  { date: "13.04.26", day: "Mandag" },
  { date: "14.04.26", day: "Tirsdag" },
  { date: "16.04.26", day: "Torsdag" },
  { date: "20.04.26", day: "Mandag" },
  { date: "21.04.26", day: "Tirsdag" },
  { date: "23.04.26", day: "Torsdag" },
  { date: "27.04.26", day: "Mandag" },
  { date: "28.04.26", day: "Tirsdag" },
  { date: "30.04.26", day: "Torsdag" },
  { date: "04.05.26", day: "Mandag" },
  { date: "05.05.26", day: "Tirsdag" },
  { date: "07.05.26", day: "Torsdag" },
  { date: "11.05.26", day: "Mandag" },
  { date: "12.05.26", day: "Tirsdag" },
  { date: "18.05.26", day: "Mandag" },
  { date: "19.05.26", day: "Tirsdag" },
  { date: "28.05.26", day: "Torsdag" },
  { date: "01.06.26", day: "Mandag" },
  { date: "02.06.26", day: "Tirsdag" },
  { date: "08.06.26", day: "Mandag" },
  { date: "09.06.26", day: "Tirsdag" },
  { date: "11.06.26", day: "Torsdag" },
  { date: "15.06.26", day: "Mandag" },
  { date: "16.06.26", day: "Tirsdag" }
];

// Ukedag-tider på norsk
const schedule = {
  "Mandag": { start: "08:30", end: "09:15" },
  "Tirsdag": { start: "10:15", end: "11:00" },
  "Torsdag": { start: "12:15", end: "14:00", recessStart: "13:00", recessEnd: "13:15" }
};

// Konverter dato + tid til Date-objekt
function parseDate(dateStr, timeStr) {
  const [day, month, year] = dateStr.split(".").map(Number);
  const [hour, minute] = timeStr.split(":").map(Number);
  return new Date(2000 + year, month - 1, day, hour, minute);
}

// Lag liste over alle klasse-perioder (med pause tatt hensyn til)
let classPeriods = [];
classDates.forEach(c => {
  let times = schedule[c.day];
  if (!times) return;

  // Hele timen
  let start = parseDate(c.date, times.start);
  let end = parseDate(c.date, times.end);

  // Hvis torsdag, del opp timen rundt pausen
  if (c.day === "Torsdag" && times.recessStart && times.recessEnd) {
    let recessStart = parseDate(c.date, times.recessStart);
    let recessEnd = parseDate(c.date, times.recessEnd);
    // Før pause
    classPeriods.push({ start: start, end: recessStart });
    // Etter pause
    classPeriods.push({ start: recessEnd, end: end });
  } else {
    classPeriods.push({ start: start, end: end });
  }
});

// Beregn total klasse-tid i sekunder
function totalClassSeconds() {
  const now = new Date();
  let total = 0;
  classPeriods.forEach(p => {
    if (now < p.start) {
      total += (p.end - p.start) / 1000;
    } else if (now >= p.start && now < p.end) {
      total += (p.end - now) / 1000;
    }
    // Hvis nå er etter end, timer er ferdig → ikke medregnet
  });
  return total;
}

// Oppdater nedtelling
function updateTimer() {
  let totalSec = totalClassSeconds();
  let hours = Math.floor(totalSec / 3600);
  let minutes = Math.floor((totalSec % 3600) / 60);
  let seconds = Math.floor(totalSec % 60);
  document.getElementById("totalCountdown").textContent =
    `${hours}t ${minutes}m ${seconds}s`;
}

setInterval(updateTimer, 1000);
updateTimer();
</script>
</body>
</html>
