<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <title>Skolefaen</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f0f0f;
      color: white;
      text-align: center;
      padding: 20px;
    }
    .subject {
      margin: 30px auto;
      max-width: 500px;
    }
    .timer {
      font-size: 1.8em;
      margin: 10px 0;
    }
    .progress-container {
      width: 100%;
      height: 18px;
      background: #333;
      border-radius: 10px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background: limegreen;
    }
  </style>
</head>
<body>

<h1>Skolefaen</h1>

<div id="subjects"></div>

<script>
// =====================
// HJELPEFUNKSJON
// =====================
function parseDate(d, t) {
  const [day, month, year] = d.split(".");
  const [h, m] = t.split(":");
  return new Date(2000 + Number(year), Number(month) - 1, Number(day), Number(h), Number(m));
}

function buildSubject(name, periods) {
  const total = periods.reduce((a,p)=>a+(p.end-p.start)/1000,0);

  const id = name.toLowerCase();
  document.getElementById("subjects").innerHTML += `
    <div class="subject">
      <h2>${name}</h2>
      <div class="timer" id="${id}Timer">Laster…</div>
      <div class="progress-container">
        <div class="progress-bar" id="${id}Progress"></div>
      </div>
    </div>
  `;

  function remaining() {
    const now = new Date();
    return periods.reduce((a,p)=>{
      if (now < p.start) return a + (p.end-p.start)/1000;
      if (now < p.end) return a + (p.end-now)/1000;
      return a;
    },0);
  }

  function update() {
    const rem = remaining();
    const done = total - rem;

    const h = Math.floor(rem/3600);
    const m = Math.floor((rem%3600)/60);
    const s = Math.floor(rem%60);

    document.getElementById(id+"Timer").textContent = `${h}t ${m}m ${s}s`;
    document.getElementById(id+"Progress").style.width =
      `${(done/total)*100}%`;
  }

  setInterval(update, 1000);
  update();
}

// =====================
// MATTE
// =====================
let matte = [];
[
 "09.02.26","10.02.26","12.02.26","23.02.26","24.02.26","26.02.26",
 "02.03.26","03.03.26","05.03.26","09.03.26","10.03.26","12.03.26",
 "16.03.26","17.03.26","19.03.26","26.03.26","07.04.26","09.04.26",
 "13.04.26","14.04.26","16.04.26","20.04.26","21.04.26","23.04.26",
 "27.04.26","28.04.26","30.04.26","04.05.26","05.05.26","07.05.26",
 "11.05.26","12.05.26","18.05.26","19.05.26","28.05.26","01.06.26",
 "02.06.26","08.06.26","09.06.26","11.06.26","15.06.26","16.06.26"
].forEach(d=>{
  const day = parseDate(d,"00:00").getDay();
  if (day===1) matte.push({start:parseDate(d,"08:30"),end:parseDate(d,"09:15")});
  if (day===2) matte.push({start:parseDate(d,"10:15"),end:parseDate(d,"11:00")});
  if (day===4) {
    matte.push({start:parseDate(d,"12:15"),end:parseDate(d,"13:00")});
    matte.push({start:parseDate(d,"13:15"),end:parseDate(d,"14:00")});
  }
});
buildSubject("Matte", matte);

// =====================
// ENGELSK
// =====================
let engelsk = [];
[
 "11.02.26","12.02.26","25.02.26","26.02.26","04.03.26","05.03.26",
 "11.03.26","12.03.26","18.03.26","19.03.26","25.03.26","26.03.26",
 "08.04.26","09.04.26","15.04.26","16.04.26","22.04.26","23.04.26",
 "29.04.26","30.04.26","06.05.26","07.05.26","13.05.26","27.05.26",
 "28.05.26","03.06.26","10.06.26","11.06.26","17.06.26"
].forEach(d=>{
  const day = parseDate(d,"00:00").getDay();
  if (day===3) engelsk.push({start:parseDate(d,"08:30"),end:parseDate(d,"10:00")});
  if (day===4) engelsk.push({start:parseDate(d,"11:30"),end:parseDate(d,"12:15")});
});
buildSubject("Engelsk", engelsk);

// =====================
// NORSK
// =====================
let norsk = [];
[
 "10.02.26","12.02.26","13.02.26","24.02.26","26.02.26","27.02.26",
 "03.03.26","05.03.26","06.03.26","10.03.26","12.03.26","13.03.26",
 "17.03.26","19.03.26","20.03.26","26.03.26","27.03.26",
 "07.04.26","09.04.26","10.04.26","14.04.26","16.04.26","17.04.26",
 "21.04.26","23.04.26","24.04.26","28.04.26","30.04.26",
 "05.05.26","07.05.26","08.05.26","12.05.26","15.05.26","19.05.26",
 "28.05.26","29.05.26","02.06.26","05.06.26","09.06.26",
 "11.06.26","12.06.26","16.06.26"
].forEach(d=>{
  const day = parseDate(d,"00:00").getDay();
  if (day===2) {
    norsk.push({start:parseDate(d,"12:15"),end:parseDate(d,"13:00")});
    norsk.push({start:parseDate(d,"13:15"),end:parseDate(d,"14:00")});
  }
  if (day===4) norsk.push({start:parseDate(d,"08:30"),end:parseDate(d,"10:00")});
  if (day===5) norsk.push({start:parseDate(d,"08:30"),end:parseDate(d,"09:15")});
});
buildSubject("Norsk", norsk);

// =====================
// TILVALGSFAG
// =====================
let språk = [];
[
 "10.02.26","13.02.26","24.02.26","27.02.26","03.03.26","06.03.26",
 "10.03.26","13.03.26","17.03.26","20.03.26","27.03.26",
 "07.04.26","10.04.26","14.04.26","17.04.26","21.04.26","24.04.26",
 "28.04.26","05.05.26","08.05.26","12.05.26","15.05.26","19.05.26",
 "29.05.26","02.06.26","05.06.26","09.06.26","12.06.26","16.06.26"
].forEach(d=>{
  const day = parseDate(d,"00:00").getDay();
  if (day===2) språk.push({start:parseDate(d,"08:30"),end:parseDate(d,"10:00")});
  if (day===5) språk.push({start:parseDate(d,"10:15"),end:parseDate(d,"11:00")});
});
buildSubject("Tilvalgsfag", språk);

// =====================
// KRLE
// =====================
let krle = [];
[
 "11.02.26","23.02.26","25.02.26","02.03.26","04.03.26",
 "09.03.26","11.03.26","16.03.26","18.03.26","23.03.26",
 "25.03.26","08.04.26","13.04.26","15.04.26","20.04.26",
 "22.04.26","27.04.26","29.04.26","04.05.26","06.05.26",
 "11.05.26","13.05.26","18.05.26","27.05.26","01.06.26",
 "03.06.26","08.06.26","10.06.26","15.06.26","17.06.26"
].forEach(d=>{
  const day = parseDate(d,"00:00").getDay();
  if (day===1 || day===3)
    krle.push({start:parseDate(d,"10:15"),end:parseDate(d,"11:00")});
});
buildSubject("KRLE", krle);
</script>

</body>
</html>
